console.log("module1"),console.log("module2");const e=async e=>{try{const t=await fetch(`https://metaweather-api.glitch.me/${e}`);if(!t.ok)throw new Error("Something went wrong");return await t.json()}catch(e){console.log(e)}};class t{async getQueryLocations(t){const a=`/api/location/search/?query=${t}`;return await e(a)}async getWeatherData(t){const a=`/api/location/${t}`;return await e(a)}async getHistoricalWeatherData(t,a){const r=`/api/location/${t}/${a}`;return await e(r)}}class a{setText(e){this.elem.innerText=e}setImage(e){this.elem.src=e}setWindIcon(e){this.elem.style.transform=`rotate(${e}deg)`}setDatalistChildren(e){this.elem.innerHTML="",e.forEach((e=>{const t=document.createElement("option");t.value=e.title,t.dataset.woeid=e.woeid,this.elem.append(t)}))}toggleDisplay(){this.elem.style.display="none"===this.elem.style.display?"flex":"none"}reset(){this.elem.value=""}constructor(e){this.elem=document.getElementById(e)}}const r="standby",o="error",n="ready",s="loading",c="reload",l=(e,t)=>{switch([...e.querySelector(".search-icon-container").children].forEach((e=>{e.classList.remove("active")})),t){case"standby":e.querySelector(".fa-search").classList.add("active");break;case"loading":e.querySelector(".lds-spinner").classList.add("active");break;case"error":e.querySelector(".fa-exclamation").classList.add("active");break;case"ready":e.querySelector(".fa-check").classList.add("active");break;case"reload":e.querySelector(".fa-redo").classList.add("active");break;default:console.log("unexpected input")}},i=(e,t)=>{let a;return function(...r){clearTimeout(a),a=setTimeout((()=>{clearTimeout(a),e(...r)}),t)}};let d=r;const u=new t,h=async e=>{const t=e.target,i=e.target.closest("form"),h=i.querySelector(".search-info-container p");if(h.innerText="",!e.target.value)return d=r,void l(i,d);d=s,l(i,d);try{const s=await u.getQueryLocations(e.target.value);if(s.length<1)return console.log("No locations found"),d=o,l(i,d),void(h.innerText="No results");new a("results").setDatalistChildren(s),((e,t)=>{const a=e.find((({title:e})=>e.toLowerCase()===t.value.toLowerCase()));return!!a&&(t.dataset.currentWoeid=a.woeid,t.dataset.currentCity=a.title,!0)})(s,t)?(d=n,l(i,d)):(d=r,l(i,d))}catch(e){d=c,l(i,d),h.innerText="Try again"}},m=e=>{const t=e.target.closest("form"),a=t.querySelector("input"),o=t.querySelector(".search-info-container p");a.value="",d=r,l(t,d),o.innerText=""},y=(new t,new class{set(e,t){try{localStorage.setItem(e,t)}catch(e){}}get(e){try{return localStorage.getItem(e)}catch(e){}return null}remove(e){try{localStorage.removeItem(e)}catch(e){}}},document.querySelector(".home-search-bar")),g=document.querySelector(".daily-search-bar"),w=new a("home-input"),v=new a("daily-input"),f=(new a("home-view"),new a("search-view")),p=document.querySelectorAll(".fa-times"),L=document.querySelectorAll(".fa-redo");function S(e){if(e.preventDefault(),d!==n)return;(async e=>{const t=new a("home-view"),r=new a("search-view");u.getWeatherData(e).then((e=>{console.log(e),t.toggleDisplay(),r.toggleDisplay()}))})(this.getElementsByTagName("input")[0].dataset.currentWoeid)}f.toggleDisplay(),l(y,d),w.elem.addEventListener("input",i(h,1500)),y.addEventListener("submit",S),v.elem.addEventListener("input",i(h,1500)),g.addEventListener("submit",S),p.forEach((e=>{e.addEventListener("click",m)})),L.forEach((e=>{e.addEventListener("click",(()=>{console.log("reload")}))}));
//# sourceMappingURL=index.d5dcb0dd.js.map
